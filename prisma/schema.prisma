// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id      Int      @default(autoincrement()) @id
  password  String   
  name    String?

  accts Account[]

  categories Category[]
}

model Account {
  accNumber Int @default(autoincrement()) @id
  balance Int @default(0) 
  type Int?
  user User @relation(fields: [userId], references: [id])
  userId Int
  transactions Transaction[] @relation(name: "TransMainAcct")
  transactionsSub Transaction[] @relation(name: "TransSubAcct")//??

}

model Transaction {
  transNumber Int @default(autoincrement()) @id
  acct Account @relation(name: "TransMainAcct",fields: [accNumber], references: [accNumber])
  accNumber Int
  type TransType
  amount Int
  category Int
  acctSub Account @relation(name: "TransSubAcct", fields: [accSubNumber], references: [accNumber])  //I dont wanna use this
  accSubNumber Int


}

model Category{
    id String @default("") @id  //should be combination of userId and categoryNum https://stackoverflow.com/questions/53373101/prisma-datamodel-primary-key-as-a-combination-of-two-relational-models
  user User @relation(fields: [userId], references:[id])
  userId Int

  categoryNum Int
  name String
  balance Int

}

enum TransType {
  SEND
  RECEIVE
  SPEND
  EARN
}